# TCP 3-Way Handshakeμ™€ 4-Way Handshake μ΄ν•΄ν•κΈ°

![network-icon](https://github.com/cona-tus/TIL/assets/90844424/c42f62e2-e9f8-41e1-8cfe-0961ff668a28)

## 1. TCPλ” μ—°κ²° μ§€ν–¥ ν”„λ΅ν† μ½μ…λ‹λ‹¤

**TCP**λ” <u>μ—°κ²° μ§€ν–¥ ν”„λ΅ν† μ½λ΅, λ‘ μ¥μΉ κ°„μ— μ•μ •μ μΈ μ—°κ²°μ„ μ„¤μ •</u>ν•©λ‹λ‹¤. ν†µμ‹ μ„ μ‹μ‘ν•  λ•λ” 3-Way, ν†µμ‹ μ„ λ§μΉ  λ•λ” 4-Way Handshake κ³Όμ •μ„ κ±°μΉκ² λ©λ‹λ‹¤.

<br/>

TCP/IPλ¥Ό μ‚¬μ©ν•μ—¬ ν¨ν‚·μ„ μ „μ†΅ν•λ” κ³Όμ •μ„ λ‹¨κ³„λ³„λ΅ μ‚΄ν΄λ΄…μ‹λ‹¤.

<br/>

## 2. TCP μ—°κ²° ν”„λ΅μ„Έμ¤

### 1λ‹¨κ³„: μ—°κ²° μ„¤μ •ν•κΈ° (3-Way Handshake)

λ‘ μ»΄ν“¨ν„°κ°€ TCPλ¥Ό ν†µν•΄ μ„λ΅ λ°μ΄ν„°λ¥Ό λ³΄λ‚΄λ ¤λ©΄ λ¨Όμ € 3-Way Handshakeλ¥Ό μ‚¬μ©ν•΄ μ—°κ²°μ„ μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤.

![3-way-handshake](https://github.com/cona-tus/TIL/assets/90844424/95af5b65-5cca-4f90-8701-4cacd8e70ff9)

1. ν΄λΌμ΄μ–ΈνΈλ” μ—°κ²° μ”μ²­ λ©”μ‹μ§€μΈ `SYN`(β”) ν¨ν‚·μ„ μ„λ²„μ—κ² λ³΄λƒ…λ‹λ‹¤.
2. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² μ—°κ²° μλ½ μ‘λ‹µ λ©”μ‹μ§€μΈ `ACK`(π‘) ν¨ν‚·κ³Ό `SYN`(β”) ν¨ν‚·μ„ λ³΄λƒ…λ‹λ‹¤. μ΄ λ‹¨κ³„κ°€ μ™„λ£λλ©΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅μ μ—°κ²°μ΄ μ„¤μ •λ©λ‹λ‹¤.
3. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— μ—°κ²° μλ½ ν™•μΈ λ©”μ‹μ§€μΈ `ACK`(π‘) ν¨ν‚·μ„ λ³΄λƒ…λ‹λ‹¤. μ΄ ν›„ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„μ μ—°κ²°μ΄ ν•μ„±λ©λ‹λ‹¤.

<br/>

Handshakeλ¥Ό μ™„λ£ν•λ©΄, μ‹¤μ  λ°μ΄ν„°κ°€ ν¬ν•¨λ ν¨ν‚·μ„ μμ‹ ν•  μ¤€λΉ„κ°€ λ κ²ƒμ…λ‹λ‹¤.

<br/>

### 2λ‹¨κ³„: λ°μ΄ν„° ν¨ν‚· λ³΄λ‚΄κΈ°

λ°μ΄ν„° ν¨ν‚·μ΄ μ „μ†΅λλ©΄, μμ‹ μλ” κ° ν¨ν‚·μ— λ€ν•΄ ν™•μΈ μ‘λ‹µμ„ λ³΄λ‚΄μ•Ό ν•©λ‹λ‹¤.

![send-data](https://github.com/cona-tus/TIL/assets/90844424/80fa3b7d-5ba6-44cc-8cf1-d0e4bfc583a9)

1. ν΄λΌμ΄μ–ΈνΈλ” λ°μ΄ν„°μ™€ μ‹ν€€μ¤ λ²νΈκ°€ ν¬ν•¨λ `ν¨ν‚·`μ„ λ³΄λƒ…λ‹λ‹¤.
2. μ„λ²„λ” `ACK`(π‘)λ΅ μ‘λ‹µν•©λ‹λ‹¤.
3. λ§μ•½ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅λ¶€ν„° μΉμΈμ„ λ°›μ§€ λ»ν•λ©΄ μ λ€λ΅ μ†΅μ‹ ν•μ§€ λ»ν• κ²ƒμΌλ΅ νλ‹¨ν•κ³  λ°μ΄ν„°λ¥Ό μ¬μ „μ†΅ν•©λ‹λ‹¤.

<br/>

### 3λ‹¨κ³„: μ—°κ²° μΆ…λ£ν•κΈ° (4-Way Handshake)

ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ” μ΄μƒ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ§€ μ•μΌλ ¤λ©΄ μ—°κ²°μ„ λ‹«μµλ‹λ‹¤.

![4-way-handshake](https://github.com/cona-tus/TIL/assets/90844424/cb27c015-9824-43ab-9c87-a5c686c60fb6)

1. TCP μ—°κ²°μ΄ λμ–΄μλ” μƒνƒμ—μ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†μ„ λκΈ° μ„ν•΄ `FIN`(β‹) ν¨ν‚·μ„ μ „μ†΅ν•©λ‹λ‹¤.
2. μ„λ²„λ” μ—°κ²° μΆ…λ£ μμ‚¬λ¥Ό ν™•μΈν•κ³  μλ½ μ‘λ‹µ λ©”μ‹μ§€ `ACK`(π‘)λ¥Ό λ³΄λƒ…λ‹λ‹¤. μ΄λ• μ•„μ§ λ³΄λ‚Ό λ°μ΄ν„°κ°€ λ‚¨μ•„μλ” κ²½μ°, λ°μ΄ν„° μ „μ†΅μ΄ μ™„λ£λ  λ•κΉμ§€ μ μ‹ λ€κΈ°ν•©λ‹λ‹¤.
3. λ°μ΄ν„° μ „μ†΅μ΄ μ™„λ£λλ©΄, μ„λ²„λ” `FIN`(β‹) μ”μ²­ λ©”μ‹μ§€λ¥Ό λ³΄λƒ…λ‹λ‹¤.
4. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ„ μ—°κ²°μ„ λ‹«μ•λ‹¤λ” μ‹ νΈλ¥Ό μμ‹ ν•λ©΄, `ACK`(π‘)λ¥Ό λ³΄λƒ…λ‹λ‹¤.

λ¨λ“  λ‹¨κ³„κ°€ μΆ…λ£λλ©΄ μ—°κ²°μ΄ λ‹«ν™λ‹λ‹¤.

<br/>

μ΄λ¬ν• μ–‘λ°©ν–¥ μ—°κ²° λ°©μ‹μ μ¥μ μ€ λ©”μ‹μ§€λ¥Ό μ£Όκ³ λ°›μΌλ©° <u>λ°μ΄ν„° μ „λ‹¬μ„ λ³΄μ¥</u>λ°›μ„ μ μλ‹¤λ” κ²ƒμ…λ‹λ‹¤.

<br/>
<br/>

---

#### μ°Έκ³ 

- [λ¨λ“  κ°λ°μλ¥Ό μ„ν• HTTP μ›Ή κΈ°λ³Έ μ§€μ‹](https://inf.run/YWJd 'κΉ€μν•')
- [π μ•„μ§λ„ λ¨νΈν• TCP / UDP κ°λ… β“ μ‰½κ² μ΄ν•΄ν•μ](https://inpa.tistory.com/entry/NW-%F0%9F%8C%90-%EC%95%84%EC%A7%81%EB%8F%84-%EB%AA%A8%ED%98%B8%ED%95%9C-TCP-UDP-%EA%B0%9C%EB%85%90-%E2%9D%93-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EC%9E%90 'μΈν')
- [Transmission Control Protocol (TCP)](https://www.khanacademy.org/computing/computers-and-internet/xcae6f4a7ff015e7d:the-internet/xcae6f4a7ff015e7d:transporting-packets/a/transmission-control-protocol--tcp 'khan academy')
