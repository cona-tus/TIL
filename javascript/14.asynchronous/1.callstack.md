# 자바스크립트 런타임 환경

<br/>
 
## 멀티 스레드

> 자바스크립트는 기본적으로 `동기적`으로 진행된다. 한 번에 하나의 일만 처리하는 `싱글 스레드`!  
> 자바스크립트 런타임 환경, 즉 호스트 환경에서 제공해주는 다양한 `API`들은 `멀티 스레드` 환경에서 동작하기 때문에, 다양한 일들을 동시다발적으로 처리할 수 있다.  
> 브라우저라면 Web APIs, node라면 DOM API, setTimeout, setInterval, fetch, event listener...  
> 태스크가 종료되지 않아도 다음 태스크를 곧바로 실행하는 방식을 `비동기` 처리라고 한다.

<br/>

## 콜스택 (callstack)

> 콜스택은 코드의 실행 순서를 스택의 최상위에 쌓아놓는다. 스택은 자료구조, LIFO(Last in First Out)라고도 불린다. 보통 스택에는 push, pop, peek 같은 API들이 있다.

<br/>

## 태스크 큐 (task queue)

> 비동기 함수의 콜백함수 또는 이벤트 핸들러가 일시적으로 보관되는 영역  
> 프로미스의 후속 처리 메서드의 콜백 함수가 일시적으로 보관되는 마이크로태스크큐도 있다.

<br/>

## 이벤트 루프 (event loop)

> 자바스크립트의 `동시성`을 지원하는 것이 이벤트 루프  
> 브라우저에 `내장되어` 있는 기능 중 하나  
> 이벤트 루프는 `콜스택과 태스트 큐를 관찰`하여, 콜스택에 실행 중인 실행 컨텍스트가 있는지 확인하고, 콜스택이 비어있을 때, 태스크 큐에 있는 함수를 `순차적`(FIFO, First in First Out)으로 콜스택으로 가져온다.  
> 콜스택으로 이동한 함수는 실행된다. 콜스택에 들어온 코드들만 수행할 수 있다.  
> 태스크 큐에 일시 보관된 함수들은 비동기 처리 방식으로 동작한다.

```js
function execute() {
  console.log('1');
  setTimeout(() => {
    console.log('2');
  }, 2000);
  console.log('3');
}
execute(); // 1 3 2
```
